# Batch: BATCH-PR-20260227-03
Date: 2026-02-27
Source Audit: src-production-readiness-audit-013.md

## Summary
This batch closes the remaining production-readiness drift by enforcing NB-51 logger-exception containment across runtime subcomponents that still perform direct logger invocations in tick-adjacent paths.

## Findings → Remediation Mapping

### Finding 1 — P1: NB-51 logger containment gap in runtime subcomponents
- Severity: P1
- Problem description: Runtime-path logging in `TcpTransport`, `ConnectionManager`, and `CorrelationRegistry` still uses direct logger calls without containment.
- Dialer impact: Throwing logger implementations can break transport/health/correlation runtime flow and cause avoidable reconnect churn or tick interruption.
- Required invariant: Logger failures must never break runtime loop execution.
- NBRC clause(s): NB-51
- Concrete implementation direction:
  - Add non-throwing logging wrappers in `TcpTransport`, `ConnectionManager`, and `CorrelationRegistry`.
  - Route all runtime-path logger writes in those classes through guarded wrappers.
  - Preserve required structured context in emitted payloads (`server_key`, `action_id`, `queue_depth` where applicable).
  - Ensure guard logic does not alter existing reconnection, timeout, or overflow behavior.
- Required acceptance tests:
  - Unit tests proving throwing logger backends do not bubble from:
    - transport timeout clamp/error logging paths,
    - connection-manager circuit transition logging paths,
    - correlation overflow/drop logging paths.
  - Integration test asserting loop continuity under injected logger failures during reconnect and event-overflow scenarios.
- Task IDs generated: PR3-P1-01, PR3-P1-02

## NBRC Clauses Enforced In This Batch
NB-51

## Acceptance Criteria For Entire Batch
- Runtime logging failures in transport/health/correlation paths are fully contained.
- Throwing logger implementations cannot terminate `tick()` / `tickAll()` execution paths.
- Existing reconnect/backoff, timeout clamping, and correlation-overflow semantics remain deterministic.
- PHPUnit regressions cover logger-throw scenarios for all affected runtime components.
